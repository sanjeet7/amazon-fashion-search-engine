# Architecture Diagrams

## System Architecture Overview

```
┌─────────────────────────────────────────────────────────────────┐
│                        USER INTERFACE                          │
│                     (API Consumers)                           │
└─────────────────────┬───────────────────────────────────────────┘
                      │ HTTP/REST API
┌─────────────────────▼───────────────────────────────────────────┐
│                   SEARCH API SERVICE                           │
│                     (Port 8000)                               │
│  ┌─────────────────┬──────────────────┬─────────────────────┐  │
│  │   FastAPI       │   Search Engine  │   Health Checks    │  │
│  │   Endpoints     │   (FAISS)        │   & Monitoring     │  │
│  └─────────────────┴──────────────────┴─────────────────────┘  │
└─────────────────────┬───────────────────────────────────────────┘
                      │ File System Access
┌─────────────────────▼───────────────────────────────────────────┐
│                 DATA PIPELINE SERVICE                          │
│                   (Batch Processing)                          │
│  ┌─────────────────┬──────────────────┬─────────────────────┐  │
│  │ Data Processing │ Embedding Gen.   │ Index Building     │  │
│  │ & Validation    │ (OpenAI API)     │ (FAISS)            │  │
│  └─────────────────┴──────────────────┴─────────────────────┘  │
└─────────────────────┬───────────────────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────────────────┐
│                   DATA STORAGE                                 │
│  ┌─────────────────┬──────────────────┬─────────────────────┐  │
│  │   Raw Data      │   Processed      │   Embeddings &     │  │
│  │   (JSONL)       │   Data (Parquet) │   Index (FAISS)    │  │
│  └─────────────────┴──────────────────┴─────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

## Data Flow Architecture

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Raw Data  │───▶│   Data      │───▶│  Embedding  │───▶│   Search    │
│   (JSONL)   │    │ Processing  │    │ Generation  │    │   Index     │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
      │                   │                   │                   │
      ▼                   ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 10 Fashion  │    │ Clean &     │    │ OpenAI API │    │ FAISS Index │
│ Products    │    │ Validate    │    │ Calls       │    │ Ready       │
│ (Sample)    │    │ Text        │    │ (~$0.02)    │    │ for Search  │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

## Search Request Flow

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   User      │───▶│   Query     │───▶│  Vector     │───▶│  Ranking &  │
│   Query     │    │ Processing  │    │  Search     │    │  Results    │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
      │                   │                   │                   │
      ▼                   ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│"blue summer │    │ Enhanced    │    │ FAISS       │    │ Top 10      │
│ dress"      │    │ Query +     │    │ Similarity  │    │ Products    │
│             │    │ Filters     │    │ Search      │    │ Ranked      │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

## Component Interaction Diagram

```
┌──────────────────────────────────────────────────────────────────┐
│                     MICROSERVICES ECOSYSTEM                     │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────┐              ┌─────────────────┐            │
│  │   DATA PIPELINE │              │   SEARCH API    │            │
│  │   SERVICE       │              │   SERVICE       │            │
│  │                 │              │                 │            │
│  │ ┌─────────────┐ │              │ ┌─────────────┐ │            │
│  │ │ Data        │ │              │ │ FastAPI     │ │            │
│  │ │ Processor   │ │              │ │ Application │ │            │
│  │ └─────────────┘ │              │ └─────────────┘ │            │
│  │ ┌─────────────┐ │              │ ┌─────────────┐ │            │
│  │ │ Embedding   │ │              │ │ Search      │ │            │
│  │ │ Generator   │ │              │ │ Engine      │ │            │
│  │ └─────────────┘ │              │ └─────────────┘ │            │
│  │ ┌─────────────┐ │              │ ┌─────────────┐ │            │
│  │ │ Index       │ │              │ │ Query       │ │            │
│  │ │ Builder     │ │              │ │ Processor   │ │            │
│  │ └─────────────┘ │              │ └─────────────┘ │            │
│  └─────────────────┘              └─────────────────┘            │
│           │                                │                     │
│           ▼                                ▼                     │
│  ┌─────────────────┐              ┌─────────────────┐            │
│  │   SHARED        │              │   SHARED        │            │
│  │   MODELS        │◀────────────▶│   UTILITIES     │            │
│  │                 │              │                 │            │
│  │ • Product       │              │ • Logging       │            │
│  │ • SearchRequest │              │ • Text Proc.    │            │
│  │ • Settings      │              │ • Config        │            │
│  └─────────────────┘              └─────────────────┘            │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

```
┌──────────────────────────────────────────────────────────────────┐
│                      DEPLOYMENT OPTIONS                         │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                 LOCAL DEVELOPMENT                         │   │
│  │                                                           │   │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐   │   │
│  │  │ Terminal 1  │    │ Terminal 2  │    │ Terminal 3  │   │   │
│  │  │             │    │             │    │             │   │   │
│  │  │ uv run      │    │ uv run      │    │ curl test   │   │   │
│  │  │ pipeline    │    │ search-api  │    │ requests    │   │   │
│  │  └─────────────┘    └─────────────┘    └─────────────┘   │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                 DOCKER DEPLOYMENT                        │   │
│  │                                                           │   │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐   │   │
│  │  │ Pipeline    │    │ Search API  │    │ Shared      │   │   │
│  │  │ Container   │    │ Container   │    │ Volume      │   │   │
│  │  │             │    │             │    │             │   │   │
│  │  │ Port: 8080  │    │ Port: 8000  │    │ /app/data   │   │   │
│  │  └─────────────┘    └─────────────┘    └─────────────┘   │   │
│  │           │                  │                  │        │   │
│  │           └──────────────────┼──────────────────┘        │   │
│  │                              │                           │   │
│  │                    ┌─────────▼─────────┐                 │   │
│  │                    │ Docker Network    │                 │   │
│  │                    │ (fashion-search)  │                 │   │
│  │                    └───────────────────┘                 │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                 CLOUD DEPLOYMENT                         │   │
│  │                                                           │   │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐   │   │
│  │  │ Data        │    │ Search API  │    │ Object      │   │   │
│  │  │ Pipeline    │    │ Service     │    │ Storage     │   │   │
│  │  │ (Batch Job) │    │ (Container) │    │ (S3/GCS)    │   │   │
│  │  │             │    │             │    │             │   │   │
│  │  │ AWS Batch   │    │ ECS/Cloud   │    │ Embeddings  │   │   │
│  │  │ GCP Jobs    │    │ Run         │    │ & Data      │   │   │
│  │  └─────────────┘    └─────────────┘    └─────────────┘   │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

## API Architecture

```
┌──────────────────────────────────────────────────────────────────┐
│                      SEARCH API SERVICE                         │
│                        (FastAPI)                                │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                      ENDPOINTS                            │   │
│  │                                                           │   │
│  │  GET   /           │ Root endpoint                        │   │
│  │  GET   /health     │ Health check + system status        │   │
│  │  GET   /stats      │ Performance statistics              │   │
│  │  POST  /search     │ Semantic product search (main)      │   │
│  │  GET   /docs       │ OpenAPI documentation               │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                    MIDDLEWARE                             │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ CORS        │  │ Request     │  │ Error       │       │   │
│  │  │ Handler     │  │ Validation  │  │ Handler     │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                  BUSINESS LOGIC                          │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ Search      │  │ Query       │  │ Result      │       │   │
│  │  │ Engine      │  │ Processor   │  │ Formatter   │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                   DATA ACCESS                            │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ FAISS       │  │ Product     │  │ Embedding   │       │   │
│  │  │ Index       │  │ DataFrame   │  │ Vectors     │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

## Data Processing Pipeline

```
┌──────────────────────────────────────────────────────────────────┐
│                   DATA PIPELINE ARCHITECTURE                    │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐           │
│  │   STAGE 1   │───▶│   STAGE 2   │───▶│   STAGE 3   │           │
│  │ Data Loading│    │ Processing  │    │ Embedding   │           │
│  └─────────────┘    └─────────────┘    └─────────────┘           │
│         │                   │                   │                │
│         ▼                   ▼                   ▼                │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐           │
│  │ • Load JSONL│    │ • Clean Text│    │ • Generate  │           │
│  │ • Validate  │    │ • Extract   │    │   Embeddings│           │
│  │ • Sample    │    │   Features  │    │ • Build     │           │
│  │             │    │ • Calculate │    │   Index     │           │
│  │ Input:      │    │   Tokens    │    │ • Save      │           │
│  │ 10 products │    │             │    │   Results   │           │
│  └─────────────┘    └─────────────┘    └─────────────┘           │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                    OUTPUTS                                │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ Processed   │  │ Embeddings  │  │ FAISS       │       │   │
│  │  │ Products    │  │ Array       │  │ Index       │       │   │
│  │  │ (Parquet)   │  │ (NumPy)     │  │ (Binary)    │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

## Technology Stack Diagram

```
┌──────────────────────────────────────────────────────────────────┐
│                      TECHNOLOGY STACK                           │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                   PRESENTATION LAYER                      │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ FastAPI     │  │ OpenAPI     │  │ JSON        │       │   │
│  │  │ Framework   │  │ Docs        │  │ Responses   │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                   APPLICATION LAYER                      │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ Python      │  │ Asyncio     │  │ Pydantic    │       │   │
│  │  │ 3.11+       │  │ Async/Await │  │ Validation  │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                   AI/ML LAYER                            │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ OpenAI      │  │ FAISS       │  │ NumPy       │       │   │
│  │  │ Embeddings  │  │ Vector DB   │  │ Arrays      │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                   DATA LAYER                             │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ Pandas      │  │ Parquet     │  │ JSONL       │       │   │
│  │  │ DataFrames  │  │ Files       │  │ Raw Data    │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
│  ┌───────────────────────────────────────────────────────────┐   │
│  │                   INFRASTRUCTURE LAYER                   │   │
│  │                                                           │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │
│  │  │ Docker      │  │ UV Package  │  │ Python      │       │   │
│  │  │ Containers  │  │ Manager     │  │ Virtual Env │       │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘       │   │
│  └───────────────────────────────────────────────────────────┘   │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

These diagrams satisfy the **Architecture Diagram requirement (2.1)** from the take-home assessment, showing:

1. **High-level system architecture** with data flow from dataset to user query response
2. **Component interactions** between microservices
3. **Deployment options** for different environments
4. **Technology stack** organization
5. **API structure** and endpoint design
6. **Data processing pipeline** workflow

The diagrams demonstrate a production-ready microservices architecture with clear separation of concerns and scalable design patterns.